{% extends "base.html" %}
{% block content %}

  <!-- CREATE NEW SHARES -->
  <div class="bg-gray-800/60 backdrop-blur rounded-2xl p-6 shadow-xl mb-10">

    <h3 class="text-lg font-semibold text-white mb-4">Create New Shares</h3>
    
    <form action="{{ url_for('generate') }}" method="post" enctype="multipart/form-data" class="space-y-5">
      
      <div>
        <label class="block text-sm font-medium text-gray-300 mb-1">Choose image (PNG/JPG)</label>
        <input type="file" name="image" accept="image/*"
               class="w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-xl file:border-0 
                      file:text-sm file:font-semibold file:bg-green-600 hover:file:bg-green-700 file:text-white">
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-300 mb-1">B/W Threshold (0–255)</label>
        <input type="number" name="threshold" value="128" min="0" max="255"
               class="w-32 rounded-lg bg-gray-900 border border-gray-700 px-3 py-2 text-gray-100 
                      focus:ring-green-500 focus:border-green-500">
        <p class="text-xs text-gray-400 mt-1">Higher threshold → more white pixels.</p>
      </div>

      <button class="inline-flex items-center px-5 py-2 rounded-xl bg-green-600 hover:bg-green-700 
                     font-semibold text-white">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" 
             class="w-5 h-5 mr-2 -ml-1">
          <path fill-rule="evenodd"
                d="M10 3a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0110 3zM13.232 4.232a.75.75 0 
                011.06 1.06l-1.06 1.06a.75.75 0 01-1.06-1.06l1.06-1.06zM17 10a.75.75 0 
                01.75-.75h1.5a.75.75 0 010 1.5h-1.5A.75.75 0 
                0117 10zM15.293 15.293a.75.75 0 
                01-1.06 1.06l-1.06-1.06a.75.75 0 
                011.06-1.06l1.06 1.06zM10 17a.75.75 0 
                01-.75.75v1.5a.75.75 0 
                011.5 0v-1.5A.75.75 0 
                0110 17zM4.707 15.293a.75.75 0 
                011.06 1.06l-1.06 1.06a.75.75 0 
                11-1.06-1.06l1.06-1.06zM3 10a.75.75 0 
                01-.75.75H.75a.75.75 0 
                010-1.5h1.5A.75.75 0 
                013 10zM4.707 4.707a.75.75 0 
                011.06-1.06l-1.06-1.06a.75.75 0 
                01-1.06 1.06l1.06 1.06z"
                clip-rule="evenodd"/>
        </svg>
        Generate Shares
      </button>

    </form>

    <div class="mt-6 text-sm text-gray-400">
      <p>Tip: for best results, use high-contrast images or logos. The output doubles each dimension.</p>
    </div>
  </div>


  <!-- MERGE EXISTING SHARES -->
  <div class="bg-gray-800/60 backdrop-blur rounded-2xl p-6 shadow-xl">

    <h3 class="text-lg font-semibold text-white mb-4">Merge Existing Shares</h3>

    <form action="{{ url_for('merge') }}" method="post" enctype="multipart/form-data" class="space-y-5">

      <div>
        <label class="block text-sm font-medium text-gray-300 mb-1">Upload Share 1</label>
        <input type="file" name="share1" accept="image/*"
               class="w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-xl file:border-0 
                      file:text-sm file:font-semibold file:bg-blue-600 hover:file:bg-blue-700 file:text-white"
               required>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-300 mb-1">Upload Share 2</label>
        <input type="file" name="share2" accept="image/*"
               class="w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-xl file:border-0 
                      file:text-sm file:font-semibold file:bg-blue-600 hover:file:bg-blue-700 file:text-white"
               required>
      </div>

      <button class="inline-flex items-center px-5 py-2 rounded-xl bg-blue-600 hover:bg-blue-700 
                     font-semibold text-white w-full justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" 
             class="w-5 h-5 mr-2">
          <path d="M3 10a7 7 0 0114 0v3a2 2 0 002 2h-3a2 2 0 01-2-2v-3a5 5 0 10-10 0v3a2 2 0 
          01-2 2H1a2 2 0 002-2v-3z" />
        </svg>
        Merge Shares
      </button>

    </form>

    <div class="mt-6 text-sm text-gray-400">
      <p>Upload both generated shares to reconstruct the original hidden image.</p>
    </div>
  </div>

{% endblock %}
